<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<opacOutFormList>
  <opacOutForm description="Короткий (сводный каталог)" format="RUSMARC" name="SHORTFM" type="BIBL">
    <buildingParams condition="::&quot;true&quot;;" type="METAPARSER">
      <rule value="data:700($a,$b[0-]):%1+ipx(&quot; &quot;,%2)+&quot;, &quot;;"/>
      <rule value="data(|):700[0],701($a,$b[0-])[/0]:#2%1+ipx(&quot; &quot;,#2%2)+&quot;, &quot;;"/>
      <rule value="data(|):{700,701}[0],710($a)[/0]:#2%1+&quot;, &quot;;"/>
      <rule value="data(|):{700,701,710}[0],461$1700($a,$b[0-]):#2%1+ipx(&quot; &quot;,#2%2)+&quot;, &quot;;"/>
      <rule value="data(|):{700,701,710,461$1700}[0],461$1701($a,$b[0-])[/0]:#2%1+ipx(&quot; &quot;,#2%2)+&quot;, &quot;;"/>
      <rule value="data(|):{700,701,710,461$1700,461$1701}[0],461$1710($a)[/0]:#2%1+&quot;, &quot;;"/>
      <rule value="data(|):2001?($a${ehi}[0-]):iser(%1,&quot;. &quot;)+ipx(for (i=%2: &quot;. &quot;+i));"/>
      <rule value="data(|):461$12001?($a),2001?[1-]:ipx(&quot;. &quot;,%1) ;"/>
      <rule value="data(|):461$12001?($a),2001?[0]:ipx(&quot; &quot;,%1) ;"/>
      <rule value="data(|):461$12001?($v):ipx(&quot; &quot;,%1);"/>
      <rule value="data(|):210($d):ipx(&quot; - &quot;,%1);"/>
      <rule value="data(|):225($a,${efhi}[0-],$v[0-]):&quot; (&quot;+iser(%1,&quot;. &quot;)+ipx(for (i=%2: &quot;. &quot;+i))+ipx(&quot;. &quot;,%3)+&quot;)&quot;;"/>
      <rule value="data(|):000,463$12001?($a[0-],$v[0-])[0-],461$12001?($a[0-])[0-],463$1210($d[0-])[0-]:if(pos(#1,7,1)==&quot;a&quot; &amp;&amp; (!empty(#2) || !empty(#2%2) || !empty(#3))) &quot; (&quot;+if (!empty(#2)) ipx(#2,&quot;. &quot;) else ipx(#3,&quot;. &quot;) fi+ipx(#4,&quot; &quot;)+#2%2+&quot;)&quot; fi;"/>
      <rule value="data(|)::&quot;\n&quot;;"/>
      <rule value="str:713($c[/0]):%1;"/>
      <rule value="data1(|)::&quot;&lt;b>Местонахождение: &lt;/b>&quot;+iser(#str, &quot;, &quot;)+&quot;\n&quot;;"/>
      <rule value="data(|):000: &quot;&lt;b>Тип документа:&lt;/b> &quot;+if (up(pos(#1, 6, 1))==&quot;A&quot; || up(pos(#1, 6, 1))==&quot;B&quot;) &quot;тексты&quot; fi + if (up(pos(#1, 6, 1))==&quot;C&quot; || up(pos(#1, 6, 1))==&quot;D&quot;) &quot;ноты/партитуры&quot; fi + if (up(pos(#1, 6, 1))==&quot;E&quot; || up(pos(#1, 6, 1))==&quot;F&quot;) &quot;карты&quot; fi + if (up(pos(#1, 6, 1))==&quot;G&quot;) &quot;видео/проекции&quot; fi + if (up(pos(#1, 6, 1))==&quot;I&quot; || up(pos(#1, 6, 1))==&quot;J&quot;) &quot;аудио/звуки&quot; fi + if (up(pos(#1, 6, 1))==&quot;K&quot;) &quot;2-D графика&quot; fi + if (up(pos(#1, 6, 1))==&quot;L&quot;) &quot;электронные&quot; fi + if (up(pos(#1, 6, 1))==&quot;M&quot;) &quot;комбинированные&quot; fi + if (up(pos(#1, 6, 1))==&quot;R&quot;) &quot;3-D объекты&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):101($a[1]): if (up(#1)==&quot;RUS&quot;) &quot;&lt;b>Язык:&lt;/b> русский&quot; fi + if (up(#1)==&quot;ENG&quot;) &quot;&lt;b>Язык:&lt;/b> английский&quot; fi + if (up(#1)==&quot;FRE&quot;) &quot;&lt;b>Язык:&lt;/b> французский&quot; fi + if (up(#1)==&quot;GER&quot;) &quot;&lt;b>Язык:&lt;/b> немецкий&quot; fi + if (up(#1)==&quot;ITA&quot;) &quot;&lt;b>Язык:&lt;/b> итальянский&quot; fi + if (up(#1)==&quot;SPA&quot;) &quot;&lt;b>Язык:&lt;/b> испанский&quot; fi + if (up(#1)==&quot;BEL&quot;) &quot;&lt;b>Язык:&lt;/b> белорусский&quot; fi + if (up(#1)==&quot;UKR&quot;) &quot;&lt;b>Язык:&lt;/b> украинский&quot; fi + if (up(#1)==&quot;ARM&quot;) &quot;&lt;b>Язык:&lt;/b> армянский&quot; fi + if (up(#1)==&quot;EPO&quot;) &quot;&lt;b>Язык:&lt;/b> эсперанто&quot; fi + if (up(#1)==&quot;GRE&quot;) &quot;&lt;b>Язык:&lt;/b> греческий&quot; fi + if (up(#1)==&quot;KOM&quot;) &quot;&lt;b>Язык:&lt;/b> коми&quot; fi + if (up(#1)==&quot;LAT&quot;) &quot;&lt;b>Язык:&lt;/b> латинский&quot; fi + if (up(#1)==&quot;POL&quot;) &quot;&lt;b>Язык:&lt;/b> польский&quot; fi + if (up(#1)==&quot;POR&quot;) &quot;&lt;b>Язык:&lt;/b> португальский&quot; fi + if (up(#1)==&quot;RUM&quot;) &quot;&lt;b>Язык:&lt;/b> румынский&quot; fi + if (up(#1)==&quot;SAH&quot;) &quot;&lt;b>Язык:&lt;/b> якутский&quot; fi + if (up(#1)==&quot;GEO&quot;) &quot;&lt;b>Язык:&lt;/b> грузинский&quot; fi + if (up(#1)==&quot;AZE&quot;) &quot;&lt;b>Язык:&lt;/b> азербайджанский&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):{105,110}($a): if(up(pos(#1, 4, 1))==&quot;A&quot;) &quot;&lt;b>Форма содержания:&lt;/b> библиографические издания&quot; fi +  if(up(pos(#1, 4, 1))==&quot;B&quot;) &quot;&lt;b>Форма содержания:&lt;/b> каталоги&quot; fi + if(up(pos(#1, 4, 1))==&quot;C&quot;) &quot;&lt;b>Форма содержания:&lt;/b> указатели&quot; fi + if(up(pos(#1, 4, 1))==&quot;E&quot;) &quot;&lt;b>Форма содержания:&lt;/b> словари&quot; fi + if(up(pos(#1, 4, 1))==&quot;F&quot;) &quot;&lt;b>Форма содержания:&lt;/b> энциклопедии&quot; fi + if(up(pos(#1, 4, 1))==&quot;G&quot;) &quot;&lt;b>Форма содержания:&lt;/b> справочные издания&quot; fi + if(up(pos(#1, 4, 1))==&quot;I&quot;) &quot;&lt;b>Форма содержания:&lt;/b> статистические отчеты&quot; fi + if(up(pos(#1, 4, 1))==&quot;J&quot;) &quot;&lt;b>Форма содержания:&lt;/b> учебные издания&quot; fi + if(up(pos(#1, 4, 1))==&quot;T&quot;) &quot;&lt;b>Форма содержания:&lt;/b> карикатуры и комиксы&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):105($a): if(up(pos(#1, 4, 1))==&quot;7&quot;) &quot;&lt;b>Форма содержания:&lt;/b> дипломные работы&quot; fi + if(up(pos(#1, 4, 2))==&quot;DM&quot; || up(pos(#1,4,1))==&quot;M&quot; || up(pos(#1,4,1))==&quot;V&quot;) &quot;&lt;b>Форма содержания:&lt;/b> диссертации/авторефераты&quot; fi + if((up(pos(#1, 4, 1))==&quot;D&quot;) &amp;&amp; (up(pos(#1, 5, 1)) != &quot;M&quot;)) &quot;&lt;b>Форма содержания:&lt;/b> рефераты и резюме&quot; fi + if(up(pos(#1, 4, 1))==&quot;H&quot;) &quot;&lt;b>Форма содержания:&lt;/b> описания проектов&quot; fi + if(up(pos(#1, 4, 1))==&quot;K&quot;) &quot;&lt;b>Форма содержания:&lt;/b> патентные документы&quot; fi + if(up(pos(#1, 4, 1))==&quot;L&quot;) &quot;&lt;b>Форма содержания:&lt;/b> стандарты&quot; fi + if(up(pos(#1, 4, 1))==&quot;N&quot;) &quot;&lt;b>Форма содержания:&lt;/b> законы и законодательные акты&quot; fi + if(up(pos(#1, 4, 1))==&quot;O&quot;) &quot;&lt;b>Форма содержания:&lt;/b> цифровые таблицы&quot; fi + if(up(pos(#1, 4, 1))==&quot;P&quot;) &quot;&lt;b>Форма содержания:&lt;/b> технические отчеты&quot; fi + if(up(pos(#1, 4, 1))==&quot;Q&quot;) &quot;&lt;b>Форма содержания:&lt;/b> экзаменационные листы&quot; fi + if(up(pos(#1, 4, 1))==&quot;R&quot;) &quot;&lt;b>Форма содержания:&lt;/b> литературные обзоры/рецензии&quot; fi + if(up(pos(#1, 4, 1))==&quot;S&quot;) &quot;&lt;b>Форма содержания:&lt;/b> договоры&quot; fi + if(up(pos(#1, 4, 1))==&quot;W&quot;) &quot;&lt;b>Форма содержания:&lt;/b> религиозные тексты&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):110($a): if(up(pos(#1, 4, 1))==&quot;H&quot;) &quot;&lt;b>Форма содержания:&lt;/b> ежегодные отчеты/обзоры&quot; fi + if(up(pos(#1, 4, 1))==&quot;K&quot;) &quot;&lt;b>Форма содержания:&lt;/b> обзор&quot; fi + if(up(pos(#1, 4, 1))==&quot;L&quot;) &quot;&lt;b>Форма содержания:&lt;/b> законодательные акты&quot; fi + if(up(pos(#1, 4, 1))==&quot;M&quot;) &quot;&lt;b>Форма содержания:&lt;/b> судебные отчеты и сборники решений судов&quot; fi + if(up(pos(#1, 4, 1))==&quot;N&quot;) &quot;&lt;b>Форма содержания:&lt;/b> юридические статьи&quot; fi + if(up(pos(#1, 4, 1))==&quot;O&quot;) &quot;&lt;b>Форма содержания:&lt;/b> случаи из судебной практики&quot; fi + if(up(pos(#1, 4, 1))==&quot;P&quot;) &quot;&lt;b>Форма содержания:&lt;/b> биографии&quot; fi + if(up(pos(#1, 4, 1))==&quot;R&quot;) &quot;&lt;b>Форма содержания:&lt;/b> текущие периодические обзоры&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):210($a,$b[0-],$c[0-],$d[0-],$e[0-],$f[0-],$g[0-],$h[0-]):&quot;&lt;b>Издатель: &lt;/b>&quot;+iser(%1,&quot;; &quot;)+px(&quot; &quot;,%2)+px(&quot;: &quot;,%3)+px(&quot;, &quot;,%4)+if (!empty(%5) || !empty(%6) || !empty(%7) || !empty(%8)) &quot; (&quot;+iser(%5,&quot;; &quot;)+px(&quot; &quot;,%6)+px(&quot;: &quot;,%7)+px(&quot;, &quot;,%8)+&quot;)&quot; fi+&quot;\n&quot;;"/>
      <rule value="data(|):85640(${uad}[1-/0]):&quot;[URL]&lt;Электронный документ>&quot;+if (up(pos(%1,0,4))==&quot;HTTP&quot;) %1 else &quot;http://&quot;+%1 fi+&quot;\n&quot;;"/>
      <rule value="data(|):85642($q[1-/0],${uad}[1-/0]):if(up(%1)==&quot;SRC&quot;) &quot;[IMG]&quot;+ if (up(pos(%2,0,4))==&quot;HTTP&quot;) %2 else &quot;http://&quot;+%2 fi +&quot;\n&quot; fi;"/>
      <rule value="data(|):000:if(pos(%1,7,2)==&quot;s1&quot; || pos(%1,7,2)==&quot;s2&quot; || pos(%1,7,2)==&quot;m1&quot; || pos(%1,7,2)==&quot;91&quot;) &quot;[SEE2]&lt;Включает>\n&quot; endif;"/>
      <rule value="data(|):000,{461$1001,462$1001}:if(pos(%1,7,2)==&quot;s2&quot; || pos(%1,7,2)==&quot;m1&quot; || pos(%1,7,2)==&quot;91&quot; || pos(%1,7,2)==&quot;m2&quot; || pos(%1,7,2)==&quot;m0&quot;) &quot;[SEE1]&lt;Входит в...>\n&quot; endif;"/>
      <rule value="data(|):000,{461$1001,463$1001}:if(pos(%1,7,2)==&quot;a0&quot;) &quot;[SEE1]&lt;Источник>\n&quot; endif;"/>
      <rule value="data(|):010($a):&quot;[ISBN]&lt;ISBN>&quot;+%1+&quot;\n&quot;; "/>
      <rule value="::#data;"/>
    </buildingParams>
  </opacOutForm>
  <opacOutForm description="Короткий (сводный каталог) СИГЛА" format="RUSMARC" name="SHORTFMS" type="BIBL">
    <buildingParams condition="::&quot;true&quot;;" type="METAPARSER">
      <rule value="item:713($6): %1;"/>
      <rule value="try::if(size(#item)==1) #item else uniq(#item) fi ;"/>
      <rule value="table:713($6,$3,$g[0-],${ab}[0-],$c[0-/0],$p[0-/0]),035($6,${az}): px(%1,&quot;☻&quot;,if(up(%3)==&quot;ЮР.ЛИЦО&quot;) if(up(%1)==up(#2%1)) px(&quot;[ITEM]&quot;,%1,&quot;[/ITEM]&quot;) + px(&quot;[BIBLID]&quot;,ser(rpl(rpl(rpl(rpl(rpl(ser(#2%2,&quot; OR &quot;), &quot;\\&quot;,&quot;\\\\&quot;),&quot;\(&quot;,&quot;\\\(&quot;),&quot;\)&quot;,&quot;\\\)&quot;),&quot;\&quot;&quot;,&quot;\\\&quot;&quot;),&quot;\'&quot;,&quot;\\\'&quot;),&quot; OR &quot;),&quot;[/BIBLID]&quot;) + px(&quot;[SIGLA]&quot;,%5,&quot;[/SIGLA]&quot;) +  px(&quot;[TITL]&quot;,ser(%4,&quot;. &quot;),&quot;[/TITL]&quot;) + px(&quot;[ADRESS]&quot;,%6,&quot;[/ADRESS]&quot;) + px(&quot;[AUTHID]&quot;,rpl(rpl(rpl(rpl(rpl(%2, &quot;\\&quot;,&quot;\\\\&quot;),&quot;\(&quot;,&quot;\\\(&quot;),&quot;\)&quot;,&quot;\\\)&quot;),&quot;\&quot;&quot;,&quot;\\\&quot;&quot;),&quot;\'&quot;,&quot;\\\'&quot;),&quot;[/AUTHID]&quot;) fi else px(&quot;[END]&quot;,px(&quot;[ITEM]&quot;,%1,&quot;[/ITEM]&quot;) + px(&quot;[SIGLA]&quot;,%5,&quot;[/SIGLA]&quot;) +  px(&quot;[TITL]&quot;,ser(%4,&quot;. &quot;),&quot;[/TITL]&quot;) + px(&quot;[ADRESS]&quot;,%6,&quot;[/ADRESS]&quot;) + px(&quot;[AUTHID]&quot;,rpl(rpl(rpl(rpl(rpl(%2, &quot;\\&quot;,&quot;\\\\&quot;),&quot;\(&quot;,&quot;\\\(&quot;),&quot;\)&quot;,&quot;\\\)&quot;),&quot;\&quot;&quot;,&quot;\\\&quot;&quot;),&quot;\'&quot;,&quot;\\\'&quot;),&quot;[/AUTHID]&quot;),&quot;&quot;) fi);"/>
      <rule value="tab::if(size(#table)==1) #table else uniq(#table) fi;"/>
      <rule value="::for(i=#try: &quot;[UR]&quot; + ser(for(j=#tab: if(token(j,&quot;☻&quot;)[0]==i) token(j,&quot;☻&quot;)[1] fi)) + &quot;[/UR]&quot;);"/>
    </buildingParams>
  </opacOutForm>
  <opacOutForm description="Поисковый запрос (сводный каталог)" format="RUSMARC" name="SHORTFMSTR" type="BIBL">
    <buildingParams condition="::&quot;true&quot;;" type="PARSER">
      <rule value="010($a[0-])[0-/0],{2001?,461$12001?}($a[0-])[0-/0],{70?,710,72?}($a[0-])[0-/0],100($a[0-]),210($d[0-])[0-]::&quot;[SEARCH]&quot; + if (!empty(%1)) &quot;[NI]&quot;+%1+&quot;[/NI]&quot; fi + if (!empty(#3%1))&quot;[RP]&quot;+#3%1+&quot;[/RP]&quot; fi + if (!empty(#2%1)) &quot;[TITL]&quot;+#2%1+&quot;[/TITL]&quot; fi + if (!empty(trim(pos(#4%1[0],9,4),&quot; &quot;))) &quot;[PY]&quot;+ if(!empty(digit(#5))) pos(digit(#5),0,4) else pos(#4%1[0],9,4) fi+&quot;[/PY]&quot; fi+&quot;\n&quot;;"/>
    </buildingParams>
  </opacOutForm>
</opacOutFormList>
